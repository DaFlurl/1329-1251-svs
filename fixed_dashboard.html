<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèÜ AgentDaf1.1 - Fixed Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <main class="container">
        <header class="header">
            <h1>üèÜ AgentDaf1.1</h1>
            <div class="stats-summary">
                <div class="stat-card">
                    <h3>Positive Spieler</h3>
                    <p id="positiveCount">Lade...</p>
                </div>
                <div class="stat-card">
                    <h3>Negative Spieler</h3>
                    <p id="negativeCount">Lade...</p>
                </div>
                <div class="stat-card">
                    <h3>Alle Monarchen</h3>
                    <p id="monarchsCount">Lade...</p>
                </div>
            </div>
        </header>

        <section class="tab-container">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showTab('positive')">Positive</button>
                <button class="tab-btn" onclick="showTab('negative')">Negative</button>
                <button class="tab-btn" onclick="showTab('monarchs')">Alle Monarchen</button>
            </div>

            <div id="positiveTab" class="tab-pane active">
                <h2>Positive Spieler</h2>
                <div id="positiveList">Lade...</div>
            </div>

            <div id="negativeTab" class="tab-pane">
                <h2>Negative Spieler</h2>
                <div id="negativeList">Lade...</div>
            </div>

            <div id="monarchsTab" class="tab-pane">
                <h2>Alle Monarchen</h2>
                <div id="monarchsList">Lade...</div>
            </div>
        </section>
    </main>

    <script>
        let gameData = null;

        async function loadData() {
            try {
                console.log('Loading data...');
                const response = await fetch('data/Monday, 24 November 2025 1329+1251 v 683+665.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                gameData = await response.json();
                console.log('Data loaded:', gameData);
                
                updateUI();
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('positiveList').innerHTML = `<p style="color: red;">Fehler: ${error.message}</p>`;
                document.getElementById('negativeList').innerHTML = `<p style="color: red;">Fehler: ${error.message}</p>`;
                document.getElementById('monarchsList').innerHTML = `<p style="color: red;">Fehler: ${error.message}</p>`;
            }
        }

        function updateUI() {
            if (!gameData) return;

            // Update counts
            document.getElementById('positiveCount').textContent = gameData.positive ? gameData.positive.length : 0;
            document.getElementById('negativeCount').textContent = gameData.negative ? gameData.negative.length : 0;
            document.getElementById('monarchsCount').textContent = gameData['all monarchs'] ? gameData['all monarchs'].length : 0;

            // Update positive players
            if (gameData.positive) {
                const positiveHTML = gameData.positive.slice(0, 10).map(player => `
                    <div class="player-card">
                        <h4>${player.Name || 'Unknown'}</h4>
                        <p>Punkte: ${(player.Score || 0).toLocaleString()}</p>
                        <p>Allianz: ${player.Alliance || 'None'}</p>
                    </div>
                `).join('');
                document.getElementById('positiveList').innerHTML = positiveHTML;
            }

            // Update negative players
            if (gameData.negative) {
                const negativeHTML = gameData.negative.slice(0, 10).map(player => `
                    <div class="player-card negative">
                        <h4>${player.Name || 'Unknown'}</h4>
                        <p>Punkte: ${(player.Score || 0).toLocaleString()}</p>
                        <p>Allianz: ${player.Alliance || 'None'}</p>
                    </div>
                `).join('');
                document.getElementById('negativeList').innerHTML = negativeHTML;
            }

            // Update all monarchs
            if (gameData['all monarchs']) {
                const monarchsHTML = gameData['all monarchs'].slice(0, 10).map(monarch => `
                    <div class="player-card">
                        <h4>${monarch.Name || 'Unknown'}</h4>
                        <p>ID: ${monarch['Monarch ID'] || 'Unknown'}</p>
                        <p>Allianz: ${monarch.Alliance || 'None'}</p>
                    </div>
                `).join('');
                document.getElementById('monarchsList').innerHTML = monarchsHTML;
            }
        }

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-pane').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            event.target.classList.add('active');
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadData);
    </script>

    <style>
        .player-card {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .player-card.negative {
            background: #fff5f5;
            border-color: #ffcccc;
        }
        .tab-pane {
            display: none;
        }
        .tab-pane.active {
            display: block;
        }
        .tab-btn.active {
            background-color: #007cba;
            color: white;
        }
        .stats-summary {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            flex: 1;
        }
        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tab-btn {
            padding: 10px 20px;
            border: 1px solid #ddd;
            background: #f8f9fa;
            cursor: pointer;
            border-radius: 5px;
        }
    </style>
</body>
</html>
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß† MCP Sequential Thinking - AgentDaf1.1</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        .mcp-demo {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .mcp-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .mcp-status {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        .status-item {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            background: rgba(102, 126, 234, 0.1);
        }
        .status-item.ready {
            background: rgba(40, 167, 69, 0.1);
        }
        .status-item.error {
            background: rgba(220, 53, 69, 0.1);
        }
        .demo-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .demo-input {
            width: 100%;
            min-height: 120px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 15px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            margin-bottom: 20px;
        }
        .demo-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .demo-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .result-area {
            margin-top: 30px;
            padding: 20px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 8px;
            border-left: 4px solid #667eea;
            display: none;
        }
        .thinking-steps {
            margin: 20px 0;
        }
        .thinking-step {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
        }
        .thinking-step.processing {
            background: #fff3cd;
            border-left-color: #ffc107;
            animation: pulse 1.5s infinite;
        }
        .thinking-step.completed {
            background: #d4edda;
            border-left-color: #28a745;
        }
        .thinking-step.error {
            background: #f8d7da;
            border-left-color: #dc3545;
        }
        .step-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
            font-weight: bold;
        }
        .step-content {
            flex: 1;
        }
        .step-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        .step-description {
            color: #6c757d;
            font-size: 0.9em;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <div class="mcp-demo">
        <div class="mcp-header">
            <h1>üß† MCP Sequential Thinking Demo</h1>
            <p>Advanced reasoning capabilities for AgentDaf1.1 Dashboard</p>
        </div>

        <div class="mcp-status">
            <h3>üîß MCP Server Status</h3>
            <div class="status-grid" id="status-grid">
                <div class="status-item">
                    <i class="fas fa-server fa-2x"></i>
                    <h4>Server</h4>
                    <p id="server-status">Checking...</p>
                </div>
                <div class="status-item">
                    <i class="fas fa-docker fa-2x"></i>
                    <h4>Docker</h4>
                    <p id="docker-status">Checking...</p>
                </div>
                <div class="status-item">
                    <i class="fas fa-brain fa-2x"></i>
                    <h4>Sequential Thinking</h4>
                    <p id="thinking-status">Checking...</p>
                </div>
                <div class="status-item">
                    <i class="fas fa-plug fa-2x"></i>
                    <h4>Integration</h4>
                    <p id="integration-status">Checking...</p>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>üöÄ Try Sequential Thinking</h3>
            <p>Enter a complex question or analysis request for the gaming dashboard:</p>
            
            <textarea 
                id="analysis-prompt" 
                class="demo-input" 
                placeholder="Example: Analyze the top 10 players and predict their performance trends based on current data. Consider alliance dynamics and scoring patterns."
            ></textarea>
            
            <div class="demo-buttons">
                <button class="btn btn-primary" onclick="startAnalysis()">
                    <i class="fas fa-brain"></i> Start Sequential Analysis
                </button>
                <button class="btn btn-secondary" onclick="loadExample()">
                    <i class="fas fa-lightbulb"></i> Load Example
                </button>
                <button class="btn btn-secondary" onclick="clearResults()">
                    <i class="fas fa-trash"></i> Clear Results
                </button>
            </div>

            <div id="result-area" class="result-area">
                <h4>üß† Sequential Thinking Process</h4>
                <div id="thinking-steps" class="thinking-steps"></div>
                <div id="final-result"></div>
            </div>
        </div>

        <div class="demo-section">
            <h3>üìã Configuration</h3>
            <div id="config-display">
                <p>Loading MCP configuration...</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="components/mcp-integration.js"></script>
    <script>
        // Demo-specific functionality
        let currentAnalysis = null;

        async function initializeDemo() {
            console.log('üöÄ Initializing MCP Demo...');
            
            // Update status displays
            await updateStatus();
            
            // Load configuration display
            await displayConfiguration();
            
            console.log('‚úÖ MCP Demo initialized');
        }

        async function updateStatus() {
            const status = window.mcpIntegration.getStatus();
            
            // Server status
            updateStatusItem('server-status', status.server ? 'Connected' : 'Not Connected', status.server ? 'ready' : 'error');
            
            // Docker status (simulated)
            updateStatusItem('docker-status', 'Available', 'ready');
            
            // Thinking status
            updateStatusItem('thinking-status', status.initialized ? 'Ready' : 'Not Ready', status.initialized ? 'ready' : 'error');
            
            // Integration status
            updateStatusItem('integration-status', status.initialized ? 'Integrated' : 'Not Integrated', status.initialized ? 'ready' : 'error');
        }

        function updateStatusItem(elementId, text, statusClass) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = text;
                element.parentElement.className = `status-item ${statusClass}`;
            }
        }

        async function displayConfiguration() {
            const status = window.mcpIntegration.getStatus();
            const configDisplay = document.getElementById('config-display');
            
            if (status.config) {
                configDisplay.innerHTML = `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <h5>üîß MCP Server Configuration:</h5>
                        <pre style="background: white; padding: 10px; border-radius: 4px; overflow-x: auto;">${JSON.stringify(status.config, null, 2)}</pre>
                    </div>
                `;
            } else {
                configDisplay.innerHTML = '<p>‚ö†Ô∏è Configuration not loaded</p>';
            }
        }

        async function startAnalysis() {
            const prompt = document.getElementById('analysis-prompt').value.trim();
            
            if (!prompt) {
                alert('Please enter an analysis request');
                return;
            }

            if (currentAnalysis && currentAnalysis.isProcessing) {
                alert('Analysis already in progress. Please wait for completion.');
                return;
            }

            // Show result area
            document.getElementById('result-area').style.display = 'block';
            
            // Clear previous results
            document.getElementById('thinking-steps').innerHTML = '';
            document.getElementById('final-result').innerHTML = '';

            try {
                currentAnalysis = { isProcessing: true };
                
                // Create visual steps
                const steps = [
                    { step: 1, title: 'Analyze Prompt', description: 'Understanding the analysis request' },
                    { step: 2, title: 'Gather Context', description: 'Collecting relevant dashboard data' },
                    { step: 3, title: 'Formulate Hypothesis', description: 'Creating initial analytical approach' },
                    { step: 4, title: 'Evaluate Options', description: 'Considering different analysis methods' },
                    { step: 5, title: 'Synthesize Result', description: 'Combining insights into final analysis' }
                ];

                // Display steps
                const stepsContainer = document.getElementById('thinking-steps');
                steps.forEach((step, index) => {
                    setTimeout(() => {
                        const stepElement = createStepElement(step);
                        stepsContainer.appendChild(stepElement);
                        
                        // Simulate processing
                        setTimeout(() => {
                            stepElement.className = 'thinking-step processing';
                        }, 100);
                        
                        // Complete step
                        setTimeout(() => {
                            stepElement.className = 'thinking-step completed';
                        }, 2000);
                    }, index * 800);
                });

                // Process with MCP (simulated for demo)
                setTimeout(async () => {
                    try {
                        const result = await window.mcpIntegration.processSequentialThinking(prompt);
                        displayFinalResult(result);
                    } catch (error) {
                        displayError(error);
                    } finally {
                        currentAnalysis = { isProcessing: false };
                    }
                }, steps.length * 800 + 2000);

            } catch (error) {
                displayError(error);
                currentAnalysis = { isProcessing: false };
            }
        }

        function createStepElement(step) {
            const div = document.createElement('div');
            div.className = 'thinking-step';
            div.innerHTML = `
                <div class="step-number">${step.step}</div>
                <div class="step-content">
                    <div class="step-title">${step.title}</div>
                    <div class="step-description">${step.description}</div>
                </div>
            `;
            return div;
        }

        function displayFinalResult(result) {
            const resultContainer = document.getElementById('final-result');
            resultContainer.innerHTML = `
                <div style="background: #d4edda; padding: 20px; border-radius: 8px; margin-top: 20px;">
                    <h4>‚úÖ Analysis Complete</h4>
                    <p><strong>Confidence:</strong> ${(result.confidence * 100).toFixed(1)}%</p>
                    <p><strong>Processing Time:</strong> ${result.processing_time}ms</p>
                    
                    <h5>üéØ Key Insights:</h5>
                    <ul>
                        ${result.final_result.insights.map(insight => `<li>${insight}</li>`).join('')}
                    </ul>
                    
                    <h5>üí° Recommendations:</h5>
                    <ul>
                        ${result.final_result.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
            `;
        }

        function displayError(error) {
            const resultContainer = document.getElementById('final-result');
            resultContainer.innerHTML = `
                <div style="background: #f8d7da; padding: 20px; border-radius: 8px; margin-top: 20px;">
                    <h4>‚ùå Analysis Failed</h4>
                    <p>${error.message}</p>
                </div>
            `;
        }

        function loadExample() {
            const examplePrompt = `Analyze the current gaming dashboard data and provide insights on:
1. Top performing players and their scoring patterns
2. Alliance dynamics and team performance
3. Predictions for future ranking changes
4. Recommendations for players to improve their rankings

Consider the competitive landscape and strategic elements of the game.`;
            
            document.getElementById('analysis-prompt').value = examplePrompt;
        }

        function clearResults() {
            document.getElementById('analysis-prompt').value = '';
            document.getElementById('result-area').style.display = 'none';
            document.getElementById('thinking-steps').innerHTML = '';
            document.getElementById('final-result').innerHTML = '';
            currentAnalysis = null;
        }

        // Initialize demo when page loads
        document.addEventListener('DOMContentLoaded', initializeDemo);
    </script>
</body>
</html>
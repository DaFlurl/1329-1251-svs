<!DOCTYPE html>
<html lang="de" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèÜ AgentDaf1.1 - Live Gaming Dashboard</title>
    <meta name="description" content="Real-time gaming leaderboard with advanced analytics and team statistics">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèÜ</text></svg>">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="AgentDaf1.1">
    
    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <link href="styles/variables.css" rel="stylesheet">
    <link href="styles/dashboard.css" rel="stylesheet">
    <link href="styles/themes.css" rel="stylesheet">
    <link href="styles/mobile.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>Lade Dashboard...</h2>
            <p>Verarbeite Spieldaten</p>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-brand">
                <div class="logo">
                    <i class="fas fa-trophy"></i>
                    <span>AgentDaf1.1</span>
                </div>
                <div class="subtitle">Live Gaming Dashboard</div>
            </div>
            
            <div class="header-stats">
                <div class="stat-card">
                    <span class="stat-number" id="totalPlayers">407</span>
                    <span class="stat-label">Aktive Spieler</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalAlliances">12</span>
                    <span class="stat-label">Allianzen</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="lastUpdate">Live</span>
                    <span class="stat-label">Update</span>
                </div>
            </div>
            
            <div class="header-controls">
                <select id="dataSelector" class="data-selector">
                    <option value="monday_data.json">Montag, 24. Nov 2025</option>
                    <option value="scoreboard-data.json">Sonntag, 16. Nov 2025</option>
                </select>
                
                <div class="control-buttons">
                    <button id="refreshBtn" class="btn-control" title="Daten aktualisieren">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button id="themeToggle" class="btn-control" title="Theme wechseln">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="fullscreenBtn" class="btn-control" title="Vollbild">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="dashboard-nav">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="overview">
                    <i class="fas fa-chart-line"></i>
                    <span>√úbersicht</span>
                </button>
                <button class="nav-tab" data-tab="players">
                    <i class="fas fa-users"></i>
                    <span>Spieler</span>
                </button>
                <button class="nav-tab" data-tab="alliances">
                    <i class="fas fa-flag"></i>
                    <span>Allianzen</span>
                </button>
                <button class="nav-tab" data-tab="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="dashboard-content">
            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <div class="content-grid">
                    <!-- Top Players Card -->
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-crown"></i> Top Spieler</h3>
                            <div class="card-actions">
                                <button class="btn-small" onclick="showAllPlayers()">Alle anzeigen</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="topPlayersList" class="player-list">
                                <!-- Will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Alliance Performance Card -->
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-flag"></i> Allianz-Ranking</h3>
                            <div class="card-actions">
                                <button class="btn-small" onclick="showAllianceDetails()">Details</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="allianceRanking" class="alliance-list">
                                <!-- Will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats Card -->
                    <div class="card full-width">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-pie"></i> Schnellstatistiken</h3>
                        </div>
                        <div class="card-body">
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-value" id="totalScore">0</div>
                                    <div class="stat-desc">Gesamtpunkte</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="avgScore">0</div>
                                    <div class="stat-desc">Durchschnitt</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="highestScore">0</div>
                                    <div class="stat-desc">H√∂chste Punktzahl</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="activeGames">0</div>
                                    <div class="stat-desc">Aktive Spiele</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Players Tab -->
            <div id="players" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-users"></i> Spieler-Rangliste</h3>
                        <div class="card-filters">
                            <input type="text" id="playerSearch" placeholder="Spieler suchen..." class="search-input">
                            <select id="allianceFilter" class="filter-select">
                                <option value="">Alle Allianzen</option>
                            </select>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="playersTable" class="data-table-container">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alliances Tab -->
            <div id="alliances" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-flag"></i> Allianz-Statistiken</h3>
                    </div>
                    <div class="card-body">
                        <div id="allianceStats" class="alliance-stats-container">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="content-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-bar"></i> Punkteverteilung</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="scoreDistributionChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-pie"></i> Allianz-Verteilung</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="allianceDistributionChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card full-width">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-line"></i> Performance-Trends</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-content">
                <div class="footer-info">
                    <span>ü§ñ AgentDaf1.1 Dashboard System</span>
                    <span>|</span>
                    <span id="updateStatus">Zuletzt aktualisiert: Lade...</span>
                </div>
                <div class="footer-links">
                    <a href="https://github.com/DaFlurl/1329-1251-svs" target="_blank" class="footer-link">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                    <button id="installBtn" class="footer-link" style="display: none;">
                        <i class="fas fa-download"></i> Installieren
                    </button>
                </div>
            </div>
        </footer>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- External Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Custom Scripts -->
    <script src="components/theme-manager.js"></script>
    <script src="components/data-loader.js"></script>
    <script src="components/scoreboard.js"></script>
    <script src="components/charts.js"></script>
    <script src="scripts/main.js"></script>
    
    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>